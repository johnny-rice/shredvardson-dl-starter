#!/bin/bash

# Pre-push hook to block direct pushes to main branch
# This script prevents accidental direct pushes to the main branch

protected_branch='refs/heads/main'
current_branch=$(git symbolic-ref HEAD 2>/dev/null)

# Read the input from stdin (remote name and URL)
while read local_ref local_sha remote_ref remote_sha
do
    if [ "$remote_ref" = "$protected_branch" ]; then
        echo ""
        echo "‚ùå PUSH BLOCKED: Direct pushes to 'main' branch are not allowed!"
        echo ""
        echo "üîÑ To contribute to this repository:"
        echo "   1. Create a feature branch:"
        echo "      git checkout -b feature/your-feature-name"
        echo ""
        echo "   2. Push your feature branch:"
        echo "      git push origin feature/your-feature-name"
        echo ""
        echo "   3. Create a Pull Request on GitHub"
        echo ""
        echo "üí° This workflow ensures proper code review and maintains repository quality."
        echo ""
        exit 1
    fi
done

exit 0